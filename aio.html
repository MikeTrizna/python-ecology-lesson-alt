<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Data Management with Python for Ecologists: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [ ['$','$'], ['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="manifest" href="site.webmanifest">
<link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md navbar-light bg-white top-nav data"><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-6">
      <div class="large-logo"><img alt="Data Carpentry" src="assets/images/data-logo.svg"></div>
    </div>
    <div class="selector-container ">
      
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl navbar-light bg-white bottom-nav data" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Data Carpentry" src="assets/images/data-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Data Management with Python for Ecologists
    </div>
    <div class="search-icon-sm">
      <i role="img" aria-label="search button" data-feather="search"></i>
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Data Management with Python for Ecologists
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"></ul>
</li>
      </ul>
</div>
    <form class="d-flex col-md-2 search-form">
      <input class="form-control me-2 searchbox" type="search" placeholder="Search" aria-label="Search"><button class="btn btn-outline-success tablet-search-button" type="submit"><i class="search-icon" data-feather="search" role="img" aria-label="search button"></i></button>
    </form>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Data Management with Python for Ecologists
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress data">
    <div class="progress-bar data" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
  <div id="sidebar-col" class="col-lg-4">
    <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle"><i class="search-icon" data-feather="x" role="img"></i></button>
        <div class="sidebar-inner">
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->
      
            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  CHAPTERS
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-introducing-python.html">1. Introducing Python</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-introducing-pandas.html">2. Introducing pandas</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-accessing-data-in-a-dataframe.html">3. Accessing Data in a Dataframe</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-aggregating-and-grouping-data.html">4. Aggregating and Grouping Data</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-combining-data-with-joins.html">5. Combining Dataframes</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul></ul>
</div>
                </div>
              </div>
            </div>

            <a href="aio.html">See all in one page</a>

            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">
            
            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-introducing-python"><p>Content from <a href="01-introducing-python.html">Introducing Python</a></p>
<hr>
<p> Last updated on 2022-05-10 | <a href="https://github.com/adamancer/python-ecology-lesson-alt/edit/main/episodes/01-introducing-python.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is Python?</li>
<li>How do we assign variables in Python?</li>
<li>How does Python handle different types of data?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Introduce some Python terminology</li>
<li>Learn how to assign values to variables</li>
<li>Learn how to call functions and methods</li>
<li>Introduce the built-in Python data types and functions</li>
<li>Introduce the Python Standard Library</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="using-python"><h2 class="section-heading">Using Python</h2>
<hr class="half-width">
<p>Python is a high-level, general purpose language. In practical terms, that means it dispenses with many of the complexities of writing code.</p>
<p>A core philosophical tenet of Python is that code is read more often than it is written. Best practices for coding in Python therefore emphasize writing well-documented, consistently formatted code that follows language-wide standards. <strong>In a Pythonic world, everyone’s code would look the same.</strong></p>
</section><section id="terms"><h2 class="section-heading">Terms</h2>
<hr class="half-width">
<p>Everything in Python is an <em>object</em>. Each object has a <em>type</em>, which controls what the kind of things the object can do. For example, you can add integers together or append a string to a list. An object can be <em>assigned</em> to a <em>variable</em>, and a <em>function</em> performs an action.</p>
<p>Python is an <em>object-oriented language</em>. This means that each object includes built-in variables and functions that can be used from the object itself. When working from an object, we use different terms to refer to these concepts:</p>
<ul>
<li>an <em>attribute</em> stores a piece of data</li>
<li>a <em>method</em> performs an action</li>
</ul>
<p>Let’s look at one of the main built-in types, <code>str</code>, to see how this works in practice. In Python, <code>str</code>, short for string, is used to store and manipulate text. To get started, we’ll assign the string “hello world” to the variable <strong>text</strong>. In Python, we use a single equal sign for assignment and use quotes to define the string.</p>
<div id="callout1" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>Either single or double quotes can be used to create strings, but be careful to use them consistently! We will use double quotes in the examples here.</p>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="st">"hello world"</span></span></code></pre>
</div>
<p>Now we can access that string by referring to that variable:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>text</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span class="st">'hello world'</span></code></pre>
</div>
<p>We can check the type of the variable using the <code><a href="https://rdrr.io/r/base/typeof.html" class="external-link">type()</a></code> function:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(text)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;class 'str'&gt;</code></pre>
</div>
<p>We can modify the text by calling one of the built-in methods. We call methods by appending a period and the name of the method to the object. For example, to display the string as upper case, use <code>upper()</code>:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>text.upper()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span class="st">'HELLO WORLD'</span></code></pre>
</div>
<p>Each object may contain many attributes and methods. Use the <code>help()</code> function on an object, including functions or methods, to print a description of the object and lists the available methods.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="bu">help</span>(<span class="bu">str</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Help on class str in module builtins:

class str(object)
 |  str(object='') -&gt; str
 |  str(bytes_or_buffer[, encoding[, errors]]) -&gt; str
 |  
 |  Create a new string object from the given object. If encoding or
 |  errors is specified, then the object must expose a data buffer
 |  that will be decoded using the given encoding and error handler.
 |  Otherwise, returns the result of object.__str__() (if defined)
 |  or repr(object).
 |  encoding defaults to sys.getdefaultencoding().
 |  errors defaults to 'strict'.
 |  
 |  Methods defined here:
 |  
 |  __add__(self, value, /)
 |      Return self+value.
 |  
 |  __contains__(self, key, /)
 |      Return key in self.
 |  
 |  __eq__(self, value, /)
 |      Return self==value.
 |  
 |  __format__(self, format_spec, /)
 |      Return a formatted version of the string as described by format_spec.
 |  
 |  __ge__(self, value, /)
 |      Return self&gt;=value.
 |  
 |  __getattribute__(self, name, /)
 |      Return getattr(self, name).
 |  
 |  __getitem__(self, key, /)
 |      Return self[key].
 |  
 |  __getnewargs__(...)
 |  
 |  __gt__(self, value, /)
 |      Return self&gt;value.
 |  
 |  __hash__(self, /)
 |      Return hash(self).
 |  
 |  __iter__(self, /)
 |      Implement iter(self).
 |  
 |  __le__(self, value, /)
 |      Return self&lt;=value.
 |  
 |  __len__(self, /)
 |      Return len(self).
 |  
 |  __lt__(self, value, /)
 |      Return self&lt;value.
 |  
 |  __mod__(self, value, /)
 |      Return self%value.
 |  
 |  __mul__(self, value, /)
 |      Return self*value.
 |  
 |  __ne__(self, value, /)
 |      Return self!=value.
 |  
 |  __repr__(self, /)
 |      Return repr(self).
 |  
 |  __rmod__(self, value, /)
 |      Return value%self.
 |  
 |  __rmul__(self, value, /)
 |      Return value*self.
 |  
 |  __sizeof__(self, /)
 |      Return the size of the string in memory, in bytes.
 |  
 |  __str__(self, /)
 |      Return str(self).
 |  
 |  capitalize(self, /)
 |      Return a capitalized version of the string.
 |      
 |      More specifically, make the first character have upper case and the rest lower
 |      case.
 |  
 |  casefold(self, /)
 |      Return a version of the string suitable for caseless comparisons.
 |  
 |  center(self, width, fillchar=' ', /)
 |      Return a centered string of length width.
 |      
 |      Padding is done using the specified fill character (default is a space).
 |  
 |  count(...)
 |      S.count(sub[, start[, end]]) -&gt; int
 |      
 |      Return the number of non-overlapping occurrences of substring sub in
 |      string S[start:end].  Optional arguments start and end are
 |      interpreted as in slice notation.
 |  
 |  encode(self, /, encoding='utf-8', errors='strict')
 |      Encode the string using the codec registered for encoding.
 |      
 |      encoding
 |        The encoding in which to encode the string.
 |      errors
 |        The error handling scheme to use for encoding errors.
 |        The default is 'strict' meaning that encoding errors raise a
 |        UnicodeEncodeError.  Other possible values are 'ignore', 'replace' and
 |        'xmlcharrefreplace' as well as any other name registered with
 |        codecs.register_error that can handle UnicodeEncodeErrors.
 |  
 |  endswith(...)
 |      S.endswith(suffix[, start[, end]]) -&gt; bool
 |      
 |      Return True if S ends with the specified suffix, False otherwise.
 |      With optional start, test S beginning at that position.
 |      With optional end, stop comparing S at that position.
 |      suffix can also be a tuple of strings to try.
 |  
 |  expandtabs(self, /, tabsize=8)
 |      Return a copy where all tab characters are expanded using spaces.
 |      
 |      If tabsize is not given, a tab size of 8 characters is assumed.
 |  
 |  find(...)
 |      S.find(sub[, start[, end]]) -&gt; int
 |      
 |      Return the lowest index in S where substring sub is found,
 |      such that sub is contained within S[start:end].  Optional
 |      arguments start and end are interpreted as in slice notation.
 |      
 |      Return -1 on failure.
 |  
 |  format(...)
 |      S.format(*args, **kwargs) -&gt; str
 |      
 |      Return a formatted version of S, using substitutions from args and kwargs.
 |      The substitutions are identified by braces ('{' and '}').
 |  
 |  format_map(...)
 |      S.format_map(mapping) -&gt; str
 |      
 |      Return a formatted version of S, using substitutions from mapping.
 |      The substitutions are identified by braces ('{' and '}').
 |  
 |  index(...)
 |      S.index(sub[, start[, end]]) -&gt; int
 |      
 |      Return the lowest index in S where substring sub is found,
 |      such that sub is contained within S[start:end].  Optional
 |      arguments start and end are interpreted as in slice notation.
 |      
 |      Raises ValueError when the substring is not found.
 |  
 |  isalnum(self, /)
 |      Return True if the string is an alpha-numeric string, False otherwise.
 |      
 |      A string is alpha-numeric if all characters in the string are alpha-numeric and
 |      there is at least one character in the string.
 |  
 |  isalpha(self, /)
 |      Return True if the string is an alphabetic string, False otherwise.
 |      
 |      A string is alphabetic if all characters in the string are alphabetic and there
 |      is at least one character in the string.
 |  
 |  isascii(self, /)
 |      Return True if all characters in the string are ASCII, False otherwise.
 |      
 |      ASCII characters have code points in the range U+0000-U+007F.
 |      Empty string is ASCII too.
 |  
 |  isdecimal(self, /)
 |      Return True if the string is a decimal string, False otherwise.
 |      
 |      A string is a decimal string if all characters in the string are decimal and
 |      there is at least one character in the string.
 |  
 |  isdigit(self, /)
 |      Return True if the string is a digit string, False otherwise.
 |      
 |      A string is a digit string if all characters in the string are digits and there
 |      is at least one character in the string.
 |  
 |  isidentifier(self, /)
 |      Return True if the string is a valid Python identifier, False otherwise.
 |      
 |      Call keyword.iskeyword(s) to test whether string s is a reserved identifier,
 |      such as "def" or "class".
 |  
 |  islower(self, /)
 |      Return True if the string is a lowercase string, False otherwise.
 |      
 |      A string is lowercase if all cased characters in the string are lowercase and
 |      there is at least one cased character in the string.
 |  
 |  isnumeric(self, /)
 |      Return True if the string is a numeric string, False otherwise.
 |      
 |      A string is numeric if all characters in the string are numeric and there is at
 |      least one character in the string.
 |  
 |  isprintable(self, /)
 |      Return True if the string is printable, False otherwise.
 |      
 |      A string is printable if all of its characters are considered printable in
 |      repr() or if it is empty.
 |  
 |  isspace(self, /)
 |      Return True if the string is a whitespace string, False otherwise.
 |      
 |      A string is whitespace if all characters in the string are whitespace and there
 |      is at least one character in the string.
 |  
 |  istitle(self, /)
 |      Return True if the string is a title-cased string, False otherwise.
 |      
 |      In a title-cased string, upper- and title-case characters may only
 |      follow uncased characters and lowercase characters only cased ones.
 |  
 |  isupper(self, /)
 |      Return True if the string is an uppercase string, False otherwise.
 |      
 |      A string is uppercase if all cased characters in the string are uppercase and
 |      there is at least one cased character in the string.
 |  
 |  join(self, iterable, /)
 |      Concatenate any number of strings.
 |      
 |      The string whose method is called is inserted in between each given string.
 |      The result is returned as a new string.
 |      
 |      Example: '.'.join(['ab', 'pq', 'rs']) -&gt; 'ab.pq.rs'
 |  
 |  ljust(self, width, fillchar=' ', /)
 |      Return a left-justified string of length width.
 |      
 |      Padding is done using the specified fill character (default is a space).
 |  
 |  lower(self, /)
 |      Return a copy of the string converted to lowercase.
 |  
 |  lstrip(self, chars=None, /)
 |      Return a copy of the string with leading whitespace removed.
 |      
 |      If chars is given and not None, remove characters in chars instead.
 |  
 |  partition(self, sep, /)
 |      Partition the string into three parts using the given separator.
 |      
 |      This will search for the separator in the string.  If the separator is found,
 |      returns a 3-tuple containing the part before the separator, the separator
 |      itself, and the part after it.
 |      
 |      If the separator is not found, returns a 3-tuple containing the original string
 |      and two empty strings.
 |  
 |  removeprefix(self, prefix, /)
 |      Return a str with the given prefix string removed if present.
 |      
 |      If the string starts with the prefix string, return string[len(prefix):].
 |      Otherwise, return a copy of the original string.
 |  
 |  removesuffix(self, suffix, /)
 |      Return a str with the given suffix string removed if present.
 |      
 |      If the string ends with the suffix string and that suffix is not empty,
 |      return string[:-len(suffix)]. Otherwise, return a copy of the original
 |      string.
 |  
 |  replace(self, old, new, count=-1, /)
 |      Return a copy with all occurrences of substring old replaced by new.
 |      
 |        count
 |          Maximum number of occurrences to replace.
 |          -1 (the default value) means replace all occurrences.
 |      
 |      If the optional argument count is given, only the first count occurrences are
 |      replaced.
 |  
 |  rfind(...)
 |      S.rfind(sub[, start[, end]]) -&gt; int
 |      
 |      Return the highest index in S where substring sub is found,
 |      such that sub is contained within S[start:end].  Optional
 |      arguments start and end are interpreted as in slice notation.
 |      
 |      Return -1 on failure.
 |  
 |  rindex(...)
 |      S.rindex(sub[, start[, end]]) -&gt; int
 |      
 |      Return the highest index in S where substring sub is found,
 |      such that sub is contained within S[start:end].  Optional
 |      arguments start and end are interpreted as in slice notation.
 |      
 |      Raises ValueError when the substring is not found.
 |  
 |  rjust(self, width, fillchar=' ', /)
 |      Return a right-justified string of length width.
 |      
 |      Padding is done using the specified fill character (default is a space).
 |  
 |  rpartition(self, sep, /)
 |      Partition the string into three parts using the given separator.
 |      
 |      This will search for the separator in the string, starting at the end. If
 |      the separator is found, returns a 3-tuple containing the part before the
 |      separator, the separator itself, and the part after it.
 |      
 |      If the separator is not found, returns a 3-tuple containing two empty strings
 |      and the original string.
 |  
 |  rsplit(self, /, sep=None, maxsplit=-1)
 |      Return a list of the words in the string, using sep as the delimiter string.
 |      
 |        sep
 |          The delimiter according which to split the string.
 |          None (the default value) means split according to any whitespace,
 |          and discard empty strings from the result.
 |        maxsplit
 |          Maximum number of splits to do.
 |          -1 (the default value) means no limit.
 |      
 |      Splits are done starting at the end of the string and working to the front.
 |  
 |  rstrip(self, chars=None, /)
 |      Return a copy of the string with trailing whitespace removed.
 |      
 |      If chars is given and not None, remove characters in chars instead.
 |  
 |  split(self, /, sep=None, maxsplit=-1)
 |      Return a list of the words in the string, using sep as the delimiter string.
 |      
 |      sep
 |        The delimiter according which to split the string.
 |        None (the default value) means split according to any whitespace,
 |        and discard empty strings from the result.
 |      maxsplit
 |        Maximum number of splits to do.
 |        -1 (the default value) means no limit.
 |  
 |  splitlines(self, /, keepends=False)
 |      Return a list of the lines in the string, breaking at line boundaries.
 |      
 |      Line breaks are not included in the resulting list unless keepends is given and
 |      true.
 |  
 |  startswith(...)
 |      S.startswith(prefix[, start[, end]]) -&gt; bool
 |      
 |      Return True if S starts with the specified prefix, False otherwise.
 |      With optional start, test S beginning at that position.
 |      With optional end, stop comparing S at that position.
 |      prefix can also be a tuple of strings to try.
 |  
 |  strip(self, chars=None, /)
 |      Return a copy of the string with leading and trailing whitespace removed.
 |      
 |      If chars is given and not None, remove characters in chars instead.
 |  
 |  swapcase(self, /)
 |      Convert uppercase characters to lowercase and lowercase characters to uppercase.
 |  
 |  title(self, /)
 |      Return a version of the string where each word is titlecased.
 |      
 |      More specifically, words start with uppercased characters and all remaining
 |      cased characters have lower case.
 |  
 |  translate(self, table, /)
 |      Replace each character in the string using the given translation table.
 |      
 |        table
 |          Translation table, which must be a mapping of Unicode ordinals to
 |          Unicode ordinals, strings, or None.
 |      
 |      The table must implement lookup/indexing via __getitem__, for instance a
 |      dictionary or list.  If this operation raises LookupError, the character is
 |      left untouched.  Characters mapped to None are deleted.
 |  
 |  upper(self, /)
 |      Return a copy of the string converted to uppercase.
 |  
 |  zfill(self, width, /)
 |      Pad a numeric string with zeros on the left, to fill a field of the given width.
 |      
 |      The string is never truncated.
 |  
 |  ----------------------------------------------------------------------
 |  Static methods defined here:
 |  
 |  __new__(*args, **kwargs) from builtins.type
 |      Create and return a new object.  See help(type) for accurate signature.
 |  
 |  maketrans(...)
 |      Return a translation table usable for str.translate().
 |      
 |      If there is only one argument, it must be a dictionary mapping Unicode
 |      ordinals (integers) or characters to Unicode ordinals, strings or None.
 |      Character keys will be then converted to ordinals.
 |      If there are two arguments, they must be strings of equal length, and
 |      in the resulting dictionary, each character in x will be mapped to the
 |      character at the same position in y. If there is a third argument, it
 |      must be a string, whose characters will be mapped to None in the result.</code></pre>
</div>
<div class="section level3">
<h3 id="data-types">Data types<a class="anchor" aria-label="anchor" href="#data-types"></a>
</h3>
<p>Python defines data types for representing other types of data, including numbers or collections of data. The core Python data types are introduced in the table below. We’ll talk more about some of these as we encounter them in the lesson:</p>
<table class="table">
<thead><tr class="header">
<th>Type</th>
<th>Definition</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="https://docs.python.org/3/library/string.html" class="external-link">str</a></td>
<td>Character string</td>
<td><code>"hello world"</code></td>
</tr>
<tr class="even">
<td><a href="https://docs.python.org/3/library/functions.html#int" class="external-link">int</a></td>
<td>Integer numerical</td>
<td><code>42</code></td>
</tr>
<tr class="odd">
<td><a href="https://docs.python.org/3/library/functions.html#float" class="external-link">float</a></td>
<td>Approximate numerical</td>
<td><code>0.406</code></td>
</tr>
<tr class="even">
<td><a href="https://docs.python.org/3/library/functions.html#bool" class="external-link">bool</a></td>
<td>Stores True or False values</td>
<td>
<code>True</code> or <code>False</code>
</td>
</tr>
<tr class="odd">
<td><a href="https://docs.python.org/3/library/stdtypes.html#lists" class="external-link">list</a></td>
<td>Sequence that can be modified</td>
<td><code>["a", "b", "c"]</code></td>
</tr>
<tr class="even">
<td><a href="https://docs.python.org/3/library/stdtypes.html#tuples" class="external-link">tuple</a></td>
<td>Sequence that cannot be modified</td>
<td><code>("a", "b", "c")</code></td>
</tr>
<tr class="odd">
<td><a href="https://docs.python.org/3/library/stdtypes.html#mapping-types-dict" class="external-link">dict</a></td>
<td>Mapping of keys to values</td>
<td><code>{"DC": "District of Columbia"}</code></td>
</tr>
<tr class="even">
<td><a href="https://docs.python.org/3/library/stdtypes.html#set-types-set-frozenset" class="external-link">set</a></td>
<td>Collection of unique values</td>
<td><code>{"1", "2", 1}</code></td>
</tr>
</tbody>
</table>
</div>
</section><section id="libraries"><h2 class="section-heading">Libraries</h2>
<hr class="half-width">
<p>Python includes a number of <a href="https://docs.python.org/3/library/functions.html" class="external-link">built-in functions</a> that are available wherever Python is installed. See the table below for some examples.</p>
<div class="section level3">
<h3 id="examples-of-built-in-functions">Examples of built-in functions<a class="anchor" aria-label="anchor" href="#examples-of-built-in-functions"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th>Name</th>
<th>Description</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="https://docs.python.org/3/library/functions.html#abs" class="external-link"><code>abs()</code></a></td>
<td>Gets the absolute value of a number</td>
<td><code>abs(-1.5) # returns 1.5</code></td>
</tr>
<tr class="even">
<td><a href="https://docs.python.org/3/library/functions.html#max" class="external-link"><code>max()</code></a></td>
<td>Gets the highest value in a sequence</td>
<td><code>min([1, 2, 3]) # returns 3</code></td>
</tr>
<tr class="odd">
<td><a href="https://docs.python.org/3/library/functions.html#min" class="external-link"><code>min()</code></a></td>
<td>Gets the lowest value in a sequence</td>
<td><code>min([1, 2, 3]) # returns 1</code></td>
</tr>
<tr class="even">
<td><a href="https://docs.python.org/3/library/functions.html#round" class="external-link"><code>round()</code></a></td>
<td>Rounds a number to the nearest integer</td>
<td><code>round(5.4) # returns 5</code></td>
</tr>
</tbody>
</table>
<p>Python also includes a number of built-in libraries. A <em>library</em> bundles functions and other code related to a single task or data type. They are used to simplify the performance of common tasks. By using a common code base, a library allows coders to work more quickly and with fewer errors.</p>
<p>The libraries built into Python are referred to as the <a href="https://docs.python.org/3/library/index.html" class="external-link">Python Standard Library</a>. They can be accessed through a typical Python installation and do not require any additional downloads. A few examples are included in the table below, but as with the table of built-in functions, there are more where those came from.</p>
</div>
<div class="section level3">
<h3 id="examples-from-the-python-standard-library">Examples from the Python Standard Library<a class="anchor" aria-label="anchor" href="#examples-from-the-python-standard-library"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th>Library</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="https://docs.python.org/3/library/datetime.html" class="external-link">datetime</a></td>
<td>Reads, writes, and analyzes dates and times</td>
</tr>
<tr class="even">
<td><a href="https://docs.python.org/3/library/os.html" class="external-link">os</a></td>
<td>Create, manipulate, and get information about files and paths</td>
</tr>
<tr class="odd">
<td><a href="https://docs.python.org/3/library/random.html" class="external-link">random</a></td>
<td>Generate pseudo-random numbers</td>
</tr>
</tbody>
</table>
<p>Unlike the built-in functions, we must import a library before we can use it:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> datetime</span></code></pre>
</div>
<p>We must use the name of the library to access the functions it includes. For example, to create a <code>datetime.date</code> object (that is, a <code>date</code> object defined by the <code>datetime</code> library), we include both the library and method name:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>date <span class="op">=</span> datetime.date(<span class="dv">1970</span>, <span class="dv">1</span>, <span class="dv">1</span>)</span></code></pre>
</div>
<p>As with the built-in types, the <code>datetime.date</code> object includes its own suite of attributes and methods. We can, for example, use the year attribute to get the year:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>date.year</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span class="fl">1970</span></code></pre>
</div>
<p>Or format the date in a specific way using <a href="https://docs.python.org/3/library/datetime.html#strftime-and-%20strptime-format-codes" class="external-link">date format codes</a>. Here, %Y corresponds to YYYY, %m to MM, and %d to DD.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>date.strftime(<span class="st">"%Y-%m-</span><span class="sc">%d</span><span class="st">"</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span class="st">'1970-01-01'</span></code></pre>
</div>
<p>Like Python itself, the Python Standard Library is maintained by the Python Software Foundation. The built-in libraries are limited to a relatively small set of operations expected to be useful to a broad population of users. However, Python allows users to create their own libraries to perform actions that are beyond the scope of core Python. The rest of this lesson will focus on an external library called <code>pandas</code>.</p>
<!-- 
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use. 
 -->
</div>
</section></section><section id="aio-02-introducing-pandas"><p>Content from <a href="02-introducing-pandas.html">Introducing pandas</a></p>
<hr>
<p> Last updated on 2022-05-10 | <a href="https://github.com/adamancer/python-ecology-lesson-alt/edit/main/episodes/02-introducing-pandas.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is pandas?</li>
<li>Why use pandas for data analysis?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn about the dataset we’ll be working with</li>
<li>Import and display data from a CSV</li>
<li>Learn how pandas handles different types of data</li>
<li>Characterize data using info()</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="dataset-description"><h2 class="section-heading">Dataset description</h2>
<hr class="half-width">
<p>The data we will be using is a time-series for a small mammal community in southern Arizona. This is part of a project studying the effects of rodents and ants on the plant community that has been running for almost 40 years. The rodents are sampled on a series of 24 plots, with different experimental manipulations controlling which rodents are allowed to access which plots.</p>
<p>This is a real dataset that has been used in over 100 publications. We’ve simplified it for the workshop, but you can download the full dataset and work with it using exactly the same tools we’ll learn about today.</p>
<p>Questions</p>
<p>Let’s look at some of the cleaned spreadsheets you downloaded during Setup to complete this challenge. You’ll need the following three files:</p>
<ul>
<li>surveys.csv</li>
<li>species.csv</li>
</ul>
<div class="section level3">
<h3 id="answering-questions-using-data">Answering questions using data<a class="anchor" aria-label="anchor" href="#answering-questions-using-data"></a>
</h3>
<p>In order to answer the questions described above, we’ll need to do the following basic data operations:</p>
<ul>
<li>select subsets of the data (rows and columns)</li>
<li>group subsets of data</li>
<li>do math and other calculations</li>
<li>combine data across spreadsheets</li>
</ul>
<p>In addition, we don’t want to do this manually! Instead of searching for the right pieces of data ourselves, or clicking between spreadsheets, or manually sorting columns, we want to make the computer do the work.</p>
<p>In particular, we want to use a tool where it’s easy to repeat our analysis in case our data changes. We also want to do all this searching without actually modifying our source data.</p>
</div>
</section><section id="why-use-pandas"><h2 class="section-heading">Why use pandas?</h2>
<hr class="half-width">
<p>The Python Data Analysis Library, or pandas, is a Python library used to work with dataframes. A dataframe is very similar to a spreadsheet, consisting of rows and columns of data. It is a very common format for representing scientific data and is likely to be very familiar to anyone taking this course.</p>
<p>pandas offers the same advantages as any well-written library: It creates a common codebase for working on a single task, in this case, analyzing data. Some benefits of this approach include:</p>
<ul>
<li>
<strong>Reliability:</strong> Provides flexible, well-tested methods for reading, querying, aggregating, grouping, and plotting data</li>
<li>
<strong>Repeatability:</strong> Repeat the same analyses when data is added or changed</li>
<li>
<strong>Speed:</strong> Faster in many cases than coding our own functions in Python</li>
<li>
<strong>Reproducibility:</strong> Document and share code in narrative form using tools like Jupyter notebooks</li>
<li>
<strong>Community:</strong> Access a large, active community for help when we run into problems</li>
</ul></section><section id="importing-data-using-pandas"><h2 class="section-heading">Importing data using pandas</h2>
<hr class="half-width">
<p>Unlike the libraries in the Python Standard Library discussed in the previous lesson, pandas is not part of the typical Python installation. Once it has been installed, however, it can be accessed using the same <code>import</code> command used to import the built-in libraries. By convention, pandas is imported using the alias “pd”. We can assign the alias using the <code>as</code> keyword:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code></pre>
</div>
<div id="callout1" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>Why use an alias? We will refer to pandas many, many times when writing a script, so it’s useful to abbreviate the name and save some keystrokes. But it’s also a matter of consistency with the larger community. Many of the core scientific Python libraries, including pandas, recommend a specific alias, so most code you find online will use those aliases as well.</p>
</div>
</div>
</div>
<p>Now the pandas has been imported, we can access the function we need to load data from a CSV, <code>pd.read_csv()</code>. The <em>call</em> has three parts:</p>
<ul>
<li>The name (or in this case, alias) of the object that defines the function. This can be a library, alias, or any other object. It can also be omitted in some cases (for example, when using a function built into Python).</li>
<li>The name of the method we’d like to use</li>
<li>A set of parentheses that tells the function to run.</li>
</ul>
<p>Many functions allow you to include both <em>arguments</em> and <em>keyword arguments</em> (collectively called <em>parameters</em>) inside the parentheses when calling the function. In this case, we will pass a single argument, which is a string defining the path to the surveys.csv file:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>pd.read_csv(<span class="st">"data/surveys.csv"</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id  month  day  year  ...  species_id  sex hindfoot_length  weight
0              1      7   16  1977  ...          NL    M            32.0     NaN
1              2      7   16  1977  ...          NL    M            33.0     NaN
2              3      7   16  1977  ...          DM    F            37.0     NaN
3              4      7   16  1977  ...          DM    M            36.0     NaN
4              5      7   16  1977  ...          DM    M            35.0     NaN
...          ...    ...  ...   ...  ...         ...  ...             ...     ...
35544      35545     12   31  2002  ...          AH  NaN             NaN     NaN
35545      35546     12   31  2002  ...          AH  NaN             NaN     NaN
35546      35547     12   31  2002  ...          RM    F            15.0    14.0
35547      35548     12   31  2002  ...          DO    M            36.0    51.0
35548      35549     12   31  2002  ...         NaN  NaN             NaN     NaN

[35549 rows x 9 columns]</code></pre>
</div>
<p>A few things to observe about this table:</p>
<ul>
<li>The unlabeled column on the far left is the row label</li>
<li>
<code>pandas</code> has done a lot of work behind the scenes when reading the data, including:
<ul>
<li>Assigning the row index as the row label</li>
<li>Assigning each column a data type based on its contents</li>
<li>Assigning certain cells the value NaN, which stands for “not a number” and is used to designate null values in the dataset. Here, those cells represent blank cells in the spreadsheet.</li>
</ul>
</li>
</ul>
<p>Most of this behavior can be controlled when the spreadsheet is first read by using keyword arguments. A keyword argument is a named parameter that you can use to control the behavior of a function. For example, to force <code>pd.read_csv()</code> to use the existing record_id column as the row label, use the <code>index_col</code> keyword argument:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>pd.read_csv(<span class="st">"data/surveys.csv"</span>, index_col<span class="op">=</span><span class="st">"record_id"</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>           month  day  year  plot_id species_id  sex  hindfoot_length  weight
record_id                                                                    
1              7   16  1977        2         NL    M             32.0     NaN
2              7   16  1977        3         NL    M             33.0     NaN
3              7   16  1977        2         DM    F             37.0     NaN
4              7   16  1977        7         DM    M             36.0     NaN
5              7   16  1977        3         DM    M             35.0     NaN
...          ...  ...   ...      ...        ...  ...              ...     ...
35545         12   31  2002       15         AH  NaN              NaN     NaN
35546         12   31  2002       15         AH  NaN              NaN     NaN
35547         12   31  2002       10         RM    F             15.0    14.0
35548         12   31  2002        7         DO    M             36.0    51.0
35549         12   31  2002        5        NaN  NaN              NaN     NaN

[35549 rows x 8 columns]</code></pre>
</div>
<p>Now record_id appears on the far left, indicating that <code>pandas</code> is using that column as the row label.</p>
<div id="challenge1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Run <code>help()</code> on the <code>pd.read_csv()</code> method (note that you should omit the trailing parentheses). Alternatively, take a look at the <a href="https://pandas.pydata.org/pandas-%20docs/stable/reference/api/pandas.read_csv.html" class="external-link">much prettier documentation</a> provided by the pandas developers. Based on that information, answer the following questions:</p>
<ol style="list-style-type: decimal">
<li>What parameter would you use to control how null values are interpreted?</li>
<li>What values are interpreted as NaN by default?</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution to challenge 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>na_values</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Show me the solution to challenge 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<ul>
<li>""</li>
<li>“#N/A”</li>
<li>“#N/A N/A”</li>
<li>“#NA”</li>
<li>“-1.#IND”</li>
<li>“-1.#QNAN”</li>
<li>“-NaN”</li>
<li>“-nan”</li>
<li>“1.#IND”</li>
<li>“1.#QNAN”</li>
<li>“<na>”</na>
</li>
<li>“N/A”</li>
<li>“NA”</li>
<li>“NULL”</li>
<li>“NaN”</li>
<li>“n/a”</li>
<li>“nan”</li>
<li>“null”</li>
</ul>
</div>
</div>
</div>
</div>
</section><section id="assigning-to-variables"><h2 class="section-heading">Assigning to variables</h2>
<hr class="half-width">
<p>We can assign the dataframe to a variable to make it easier to access. As we saw in the previous lesson, we use a single equals sign to assign an object to a variable. The variable name should be short and descriptive. By convention, variables in Python use snake_case (that is, lower case with individual words separated by underscores).</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>surveys <span class="op">=</span> pd.read_csv(<span class="st">"data/surveys.csv"</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>surveys</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id  month  day  year  ...  species_id  sex hindfoot_length  weight
0              1      7   16  1977  ...          NL    M            32.0     NaN
1              2      7   16  1977  ...          NL    M            33.0     NaN
2              3      7   16  1977  ...          DM    F            37.0     NaN
3              4      7   16  1977  ...          DM    M            36.0     NaN
4              5      7   16  1977  ...          DM    M            35.0     NaN
...          ...    ...  ...   ...  ...         ...  ...             ...     ...
35544      35545     12   31  2002  ...          AH  NaN             NaN     NaN
35545      35546     12   31  2002  ...          AH  NaN             NaN     NaN
35546      35547     12   31  2002  ...          RM    F            15.0    14.0
35547      35548     12   31  2002  ...          DO    M            36.0    51.0
35548      35549     12   31  2002  ...         NaN  NaN             NaN     NaN

[35549 rows x 9 columns]</code></pre>
</div>
</section><section id="understanding-data-types-in-pandas"><h2 class="section-heading">Understanding data types in pandas</h2>
<hr class="half-width">
<p>We can use the <code>info()</code> method to see how <code>pandas</code> interpreted each column in the dataset. This method gives use the name, count, and data type of each column and provides some information about the dataset as a whole (for example, memory usage, which is helpful to know when working with large datasets):</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>surveys.info()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 35549 entries, 0 to 35548
Data columns (total 9 columns):
 #   Column           Non-Null Count  Dtype  
---  ------           --------------  -----  
 0   record_id        35549 non-null  int64  
 1   month            35549 non-null  int64  
 2   day              35549 non-null  int64  
 3   year             35549 non-null  int64  
 4   plot_id          35549 non-null  int64  
 5   species_id       34786 non-null  object 
 6   sex              33038 non-null  object 
 7   hindfoot_length  31438 non-null  float64
 8   weight           32283 non-null  float64
dtypes: float64(2), int64(5), object(2)
memory usage: 2.4+ MB</code></pre>
</div>
<p>Note that the data types used by pandas look a little different than the ones used by Python itself. See the table below for the rough equivalents.</p>
<div class="section level3">
<h3 id="data-types-in-pandas">Data types in pandas<a class="anchor" aria-label="anchor" href="#data-types-in-pandas"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th>Data Type</th>
<th>Description</th>
<th>Similar To</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>object</td>
<td>Character string or mixed</td>
<td>str</td>
</tr>
<tr class="even">
<td>int64</td>
<td>Integer numerical (no decimal)</td>
<td>int</td>
</tr>
<tr class="odd">
<td>float64</td>
<td>Approximate numerical</td>
<td>float</td>
</tr>
<tr class="even">
<td>bool</td>
<td>Stores True or False values</td>
<td>bool</td>
</tr>
<tr class="odd">
<td>datetime64</td>
<td>Stores date and time values</td>
<td>datetime.datetime</td>
</tr>
</tbody>
</table>
</div>
</section><section id="saving-a-dataframe"><h2 class="section-heading">Saving a dataframe</h2>
<hr class="half-width">
<p>When analyzing a dataset, we’ll often want to save our work to a file. The <code>to_csv()</code> method can be used to write a dataframe to a CSV:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>surveys.to_csv(<span class="st">"data/surveys_mod.csv"</span>, index<span class="op">=</span><span class="va">False</span>)</span></code></pre>
</div>
<p>But that is far from the only option – <code>pandas</code> supports a variety of file types for both reading and writing.</p>
<!-- 
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use. 
 -->
</section></section><section id="aio-03-accessing-data-in-a-dataframe"><p>Content from <a href="03-accessing-data-in-a-dataframe.html">Accessing Data in a Dataframe</a></p>
<hr>
<p> Last updated on 2022-05-10 | <a href="https://github.com/adamancer/python-ecology-lesson-alt/edit/main/episodes/03-accessing-data-in-a-dataframe.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can we look at individual rows and columns?</li>
<li>How can we perform calculations on the data?</li>
<li>How can we modify data?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Use square brackets to access individual rows and columns</li>
<li>Grab multiple columns at once using a list</li>
<li>Rename columns using a dictionary</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>We’ll begin by importing pandas and reading our CSV, as we did in the previous lesson:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>surveys <span class="op">=</span> pd.read_csv(<span class="st">"data/surveys.csv"</span>)</span></code></pre>
</div>
<section id="viewing-the-dataframe"><h2 class="section-heading">Viewing the dataframe</h2>
<hr class="half-width">
<p>To view a dataframe in a Jupyter Notebook, type the variable name as the last line of the cell. By default, this will display the first and last five rows of the dataframe:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>surveys</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id  month  day  year  ...  species_id  sex hindfoot_length  weight
0              1      7   16  1977  ...          NL    M            32.0     NaN
1              2      7   16  1977  ...          NL    M            33.0     NaN
2              3      7   16  1977  ...          DM    F            37.0     NaN
3              4      7   16  1977  ...          DM    M            36.0     NaN
4              5      7   16  1977  ...          DM    M            35.0     NaN
...          ...    ...  ...   ...  ...         ...  ...             ...     ...
35544      35545     12   31  2002  ...          AH  NaN             NaN     NaN
35545      35546     12   31  2002  ...          AH  NaN             NaN     NaN
35546      35547     12   31  2002  ...          RM    F            15.0    14.0
35547      35548     12   31  2002  ...          DO    M            36.0    51.0
35548      35549     12   31  2002  ...         NaN  NaN             NaN     NaN

[35549 rows x 9 columns]</code></pre>
</div>
<p>We will now look at how to access rows and columns in the dataframe.</p>
<div class="section level3">
<h3 id="columns">Columns<a class="anchor" aria-label="anchor" href="#columns"></a>
</h3>
<p>You can get the values from a single column using square brackets at the end of the dataframe object. For example, to look at the year column, use:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>surveys[<span class="st">"year"</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>0        1977
1        1977
2        1977
3        1977
4        1977
         ... 
35544    2002
35545    2002
35546    2002
35547    2002
35548    2002
Name: year, Length: 35549, dtype: int64</code></pre>
</div>
<p>A single column is returned as a <code>Series</code>, which is why the output for this cell is formatted differently than the other cells in this lesson. The main difference between a <code>Series</code> and a <code>DataFrame</code> is that a <code>DataFrame</code> can have multiple columns. The two classes share many but not all attributes and methods. Note also that this is a copy of data from the original dataframe. Changing values in the series will have no effect on the original dataframe.</p>
</div>
<div class="section level3">
<h3 id="using-lists-to-get-more-than-one-column-at-a-time">Using lists to get more than one column at a time<a class="anchor" aria-label="anchor" href="#using-lists-to-get-more-than-one-column-at-a-time"></a>
</h3>
<p>Python using the built-in <code>list</code> data type to store sequences, that is, an ordered list of objects. Any type of Python object can be store in a list: strings, integers, floats, even other lists. Once created, a list can be modified by appending, inserting, or deleting items. We will not be going into detail about these operations here, but as always you can learn more about how to use a list using <code>help()</code> or <a href="https://docs.python.org/3/library/stdtypes.html#list" class="external-link">the Python docs</a>.</p>
<p>Create a list using square brackets. Let’s create a list of the three columns in our dataframe that are related to the date:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>cols <span class="op">=</span> [<span class="st">"year"</span>, <span class="st">"month"</span>, <span class="st">"day"</span>]</span></code></pre>
</div>
<p>When we pass this list to the square brackets, as we did above, we retrieve a copy of the dataframe containing just those columns:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>surveys[cols]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       year  month  day
0      1977      7   16
1      1977      7   16
2      1977      7   16
3      1977      7   16
4      1977      7   16
...     ...    ...  ...
35544  2002     12   31
35545  2002     12   31
35546  2002     12   31
35547  2002     12   31
35548  2002     12   31

[35549 rows x 3 columns]</code></pre>
</div>
</div>
</section><section id="rows"><h2 class="section-heading">Rows</h2>
<hr class="half-width">
<p>You can get the rows at the beginning of the table using the head method:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>surveys.head()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   record_id  month  day  year  plot_id species_id sex  hindfoot_length  weight
0          1      7   16  1977        2         NL   M             32.0     NaN
1          2      7   16  1977        3         NL   M             33.0     NaN
2          3      7   16  1977        2         DM   F             37.0     NaN
3          4      7   16  1977        7         DM   M             36.0     NaN
4          5      7   16  1977        3         DM   M             35.0     NaN</code></pre>
</div>
<p>Provide a number inside the parentheses if you want a specific number of rows:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>surveys.head(<span class="dv">20</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>    record_id  month  day  year  ...  species_id  sex hindfoot_length  weight
0           1      7   16  1977  ...          NL    M            32.0     NaN
1           2      7   16  1977  ...          NL    M            33.0     NaN
2           3      7   16  1977  ...          DM    F            37.0     NaN
3           4      7   16  1977  ...          DM    M            36.0     NaN
4           5      7   16  1977  ...          DM    M            35.0     NaN
5           6      7   16  1977  ...          PF    M            14.0     NaN
6           7      7   16  1977  ...          PE    F             NaN     NaN
7           8      7   16  1977  ...          DM    M            37.0     NaN
8           9      7   16  1977  ...          DM    F            34.0     NaN
9          10      7   16  1977  ...          PF    F            20.0     NaN
10         11      7   16  1977  ...          DS    F            53.0     NaN
11         12      7   16  1977  ...          DM    M            38.0     NaN
12         13      7   16  1977  ...          DM    M            35.0     NaN
13         14      7   16  1977  ...          DM  NaN             NaN     NaN
14         15      7   16  1977  ...          DM    F            36.0     NaN
15         16      7   16  1977  ...          DM    F            36.0     NaN
16         17      7   16  1977  ...          DS    F            48.0     NaN
17         18      7   16  1977  ...          PP    M            22.0     NaN
18         19      7   16  1977  ...          PF  NaN             NaN     NaN
19         20      7   17  1977  ...          DS    F            48.0     NaN

[20 rows x 9 columns]</code></pre>
</div>
<p>The <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail()</a></code> method is similar, except it returns rows from the end of the table:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>surveys.tail()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id  month  day  year  ...  species_id  sex hindfoot_length  weight
35544      35545     12   31  2002  ...          AH  NaN             NaN     NaN
35545      35546     12   31  2002  ...          AH  NaN             NaN     NaN
35546      35547     12   31  2002  ...          RM    F            15.0    14.0
35547      35548     12   31  2002  ...          DO    M            36.0    51.0
35548      35549     12   31  2002  ...         NaN  NaN             NaN     NaN

[5 rows x 9 columns]</code></pre>
</div>
<p>The <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code> and <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail()</a></code> methods are useful for getting a feel for how our data is structured, but we’ll also want to be able to look at specific rows. As when we selected columns above, we can use square brackets to extract <em>slices</em> from the dataframe. This time, however, we pass two numbers separated by a colon representing the starting and ending indexes:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>surveys[<span class="dv">2</span>:<span class="dv">5</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   record_id  month  day  year  plot_id species_id sex  hindfoot_length  weight
2          3      7   16  1977        2         DM   F             37.0     NaN
3          4      7   16  1977        7         DM   M             36.0     NaN
4          5      7   16  1977        3         DM   M             35.0     NaN</code></pre>
</div>
<p>There are three things to be aware of when slicing a dataframe:</p>
<ul>
<li>Row indexes are zero-based. That is, the first row has an index of 0, not 1.</li>
<li>When slicing, the slice includes start but not end index. In this case, that means the slice includes rows 2, 3, and 4 but not 5.</li>
<li>The row label can be different from the row index</li>
</ul>
<p>Core Python types like <code>list</code> and <code>tuple</code> use the same conventions, as do most libraries that deal with sequences.</p>
</section><section id="unique-values"><h2 class="section-heading">Unique values</h2>
<hr class="half-width">
<p>Recall that you can use square brackets to return a single column from a dataframe. You can get the list of unique values within that column using the <code><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique()</a></code> method:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>surveys[<span class="st">"species_id"</span>].unique()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>array(['NL', 'DM', 'PF', 'PE', 'DS', 'PP', 'SH', 'OT', 'DO', 'OX', 'SS',
       'OL', 'RM', nan, 'SA', 'PM', 'AH', 'DX', 'AB', 'CB', 'CM', 'CQ',
       'RF', 'PC', 'PG', 'PH', 'PU', 'CV', 'UR', 'UP', 'ZL', 'UL', 'CS',
       'SC', 'BA', 'SF', 'RO', 'AS', 'SO', 'PI', 'ST', 'CU', 'SU', 'RX',
       'PB', 'PL', 'PX', 'CT', 'US'], dtype=object)</code></pre>
</div>
<p><code>pandas</code> does not provide a dedicated function or method to find distinct values across multiple columns. However, we can use the <code>drop_duplicates()</code> method on a copy of the dataframe containing only the columns we’re interested in to get the expected result:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>subset <span class="op">=</span> surveys[[<span class="st">"plot_id"</span>, <span class="st">"species_id"</span>]]</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>subset.drop_duplicates()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       plot_id species_id
0            2         NL
1            3         NL
2            2         DM
3            7         DM
4            3         DM
...        ...        ...
35474       22         SF
35511       11         US
35519        9         SF
35527       13         US
35543       15         US

[612 rows x 2 columns]</code></pre>
</div>
</section><section id="calculated-values"><h2 class="section-heading">Calculated values</h2>
<hr class="half-width">
<p>The survey dataset includes two columns, hindfoot_length and weight, that are stored as numbers and represent measurements. You may want to perform calculations using numbers like these in your own data. You can do so using Python’s built-in mathematical operators, including:</p>
<ul>
<li>
<code>+</code> for addition</li>
<li>
<code>-</code> for subtraction</li>
<li>
<code>*</code> for multiplication</li>
<li>
<code>/</code> for division</li>
<li>
<code>**</code> for exponents</li>
</ul>
<p>For example, to convert all values in the weight column from grams to milligrams, we can multiply the column by 1000:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>surveys[<span class="st">"weight"</span>] <span class="op">*</span> <span class="dv">1000</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>0            NaN
1            NaN
2            NaN
3            NaN
4            NaN
          ...   
35544        NaN
35545        NaN
35546    14000.0
35547    51000.0
35548        NaN
Name: weight, Length: 35549, dtype: float64</code></pre>
</div>
<p>To convert it to kilograms, we can divide by 1000:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>surveys[<span class="st">"weight"</span>] <span class="op">/</span> <span class="dv">1000</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>0          NaN
1          NaN
2          NaN
3          NaN
4          NaN
         ...  
35544      NaN
35545      NaN
35546    0.014
35547    0.051
35548      NaN
Name: weight, Length: 35549, dtype: float64</code></pre>
</div>
<p>Note that this calculation does not modify the original dataset. If we want to retain the result, we have to assign it to a new column:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>surveys[<span class="st">"weight_mg"</span>] <span class="op">=</span> surveys[<span class="st">"weight"</span>] <span class="op">*</span> <span class="dv">1000</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Now the weight_mg columns appear in our dataframe</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>surveys</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id  month  day  year  ...  sex hindfoot_length weight  weight_mg
0              1      7   16  1977  ...    M            32.0    NaN        NaN
1              2      7   16  1977  ...    M            33.0    NaN        NaN
2              3      7   16  1977  ...    F            37.0    NaN        NaN
3              4      7   16  1977  ...    M            36.0    NaN        NaN
4              5      7   16  1977  ...    M            35.0    NaN        NaN
...          ...    ...  ...   ...  ...  ...             ...    ...        ...
35544      35545     12   31  2002  ...  NaN             NaN    NaN        NaN
35545      35546     12   31  2002  ...  NaN             NaN    NaN        NaN
35546      35547     12   31  2002  ...    F            15.0   14.0    14000.0
35547      35548     12   31  2002  ...    M            36.0   51.0    51000.0
35548      35549     12   31  2002  ...  NaN             NaN    NaN        NaN

[35549 rows x 10 columns]</code></pre>
</div>
<p>You can also add, subtract, multiply, and divide columns, as in the following (admittedly nonsensical) calculation, which adds together the hindfoot_length and weight columns:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>surveys[<span class="st">"hindfoot_length"</span>] <span class="op">+</span> surveys[<span class="st">"weight"</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>0         NaN
1         NaN
2         NaN
3         NaN
4         NaN
         ... 
35544     NaN
35545     NaN
35546    29.0
35547    87.0
35548     NaN
Length: 35549, dtype: float64</code></pre>
</div>
</section><section id="renaming-columns"><h2 class="section-heading">Renaming columns</h2>
<hr class="half-width">
<p>The hindfoot_length and weight columns don’t specify a unit, which may get confusing if we want to perform unit conversions like the one above. Fortunately, dataframes allow us to rename existing columns using <code>rename()</code>.</p>
<p>The <code>rename()</code> method uses a dictionary (or <code>dict</code>) to map between the old and new column names. The <code>dict</code> data type is built in to Python– you don’t need to import anything to use it. They consist of keys and values. You can create a <code>dict</code> using curly braces:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>dct <span class="op">=</span> {<span class="st">"key1"</span>: <span class="st">"val1"</span>, <span class="st">"key2"</span>: <span class="st">"val2"</span>}</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>dct</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>{'key1': 'val1', 'key2': 'val2'}</code></pre>
</div>
<p>Dictionaries are a useful and highly flexible data type. As with <code>list</code> above, we’ll be giving them short shrift here, but you can learn more about them at <a href="https://docs.python.org/3/library/stdtypes.html#dict" class="external-link">the Python docs</a>.</p>
<p>Here we’ll use a dict to specify how we want to rename our columns. The <em>keys</em> will be the current columns names and the <em>values</em> are the new column names. Note that we explicitly assign the result of <code>rename()</code> to the original variable–by default, <code>rename()</code> returns a copy of the original dataframe instead of modifying the original dataframe. Most dataframe operations work this way.</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a dict that maps from the old to the new column name</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>cols <span class="op">=</span> {</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"hindfoot_length"</span>: <span class="st">"hindfoot_length_mm"</span>,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"weight"</span>: <span class="st">"weight_g"</span>,</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign the result of the rename method back to surveys</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>surveys <span class="op">=</span> surveys.rename(columns<span class="op">=</span>cols)</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="co"># View the dataframe with the new column names</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>surveys</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id  month  day  ...  hindfoot_length_mm  weight_g weight_mg
0              1      7   16  ...                32.0       NaN       NaN
1              2      7   16  ...                33.0       NaN       NaN
2              3      7   16  ...                37.0       NaN       NaN
3              4      7   16  ...                36.0       NaN       NaN
4              5      7   16  ...                35.0       NaN       NaN
...          ...    ...  ...  ...                 ...       ...       ...
35544      35545     12   31  ...                 NaN       NaN       NaN
35545      35546     12   31  ...                 NaN       NaN       NaN
35546      35547     12   31  ...                15.0      14.0   14000.0
35547      35548     12   31  ...                36.0      51.0   51000.0
35548      35549     12   31  ...                 NaN       NaN       NaN

[35549 rows x 10 columns]</code></pre>
</div>
<div id="challenge1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Create a dataframe that returns the year, month, day, species_id and weight in mg.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign the weight in milligrams to the weight_mg column</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>surveys[<span class="st">"weight_mg"</span>] <span class="op">=</span> surveys[<span class="st">"weight_g"</span>] <span class="op">*</span> <span class="dv">1000</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a copy of the year, month, day, and weight_mg columns</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>subset <span class="op">=</span> surveys[[<span class="st">"year"</span>, <span class="st">"month"</span>, <span class="st">"day"</span>, <span class="st">"weight_mg"</span>]]</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co"># View the subset</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>subset</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       year  month  day  weight_mg
0      1977      7   16        NaN
1      1977      7   16        NaN
2      1977      7   16        NaN
3      1977      7   16        NaN
4      1977      7   16        NaN
...     ...    ...  ...        ...
35544  2002     12   31        NaN
35545  2002     12   31        NaN
35546  2002     12   31    14000.0
35547  2002     12   31    51000.0
35548  2002     12   31        NaN

[35549 rows x 4 columns]</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section id="filtering"><h2 class="section-heading">Filtering</h2>
<hr class="half-width">
<p><code>pandas</code> provides a variety of ways to filter the data in the dataframe. For example, suppose you want to look at a specific species in the survey dataframe. You can view the rows matching a given species using the same square brackets we used above to select specific columns and rows. Here, however, instead of passing a value or list of values, we will pass a conditional.</p>
<p>A <em>conditional</em> is a statement that evaluates as either True or False. They often make use of inequality operators, for example:</p>
<ul>
<li>
<code>==</code> for equals</li>
<li>
<code>!=</code> for does not equal</li>
<li>
<code>&gt;</code> for greater than</li>
<li>
<code>&gt;=</code> for greater than or equal to</li>
<li>
<code>&lt;</code> for less than</li>
<li>
<code>&lt;=</code> for less than or equal to</li>
</ul>
<p>Examples of conditional statements include:</p>
<ul>
<li>
<code>"a" == "b"'</code> evaluates False</li>
<li>
<code>"a" != b"</code> evaluates True</li>
<li>
<code>3 &gt; 4</code> evaluates False</li>
</ul>
<div id="callout1" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>Remember that, in Python, a single equal sign is used to assign values to variables. We’ve already used the assignment operator in this lesson, for example, when we created a new column in the dataframe.</p>
</div>
</div>
</div>
<p>To limit the dataframe to rows matching the species “DM”, include the conditional <code>surveys["species_id"] == "DM"</code> inside the square brackets:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>surveys[surveys[<span class="st">"species_id"</span>] <span class="op">==</span> <span class="st">"DM"</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id  month  day  year  ...  sex hindfoot_length_mm weight_g  weight_mg
2              3      7   16  1977  ...    F               37.0      NaN        NaN
3              4      7   16  1977  ...    M               36.0      NaN        NaN
4              5      7   16  1977  ...    M               35.0      NaN        NaN
7              8      7   16  1977  ...    M               37.0      NaN        NaN
8              9      7   16  1977  ...    F               34.0      NaN        NaN
...          ...    ...  ...   ...  ...  ...                ...      ...        ...
35532      35533     12   31  2002  ...    F               36.0     48.0    48000.0
35533      35534     12   31  2002  ...    M               37.0     56.0    56000.0
35534      35535     12   31  2002  ...    M               37.0     53.0    53000.0
35535      35536     12   31  2002  ...    F               35.0     42.0    42000.0
35536      35537     12   31  2002  ...    F               36.0     46.0    46000.0

[10596 rows x 10 columns]</code></pre>
</div>
<p>To limit our results to observations made in or after 2000, use:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>surveys[surveys[<span class="st">"year"</span>] <span class="op">&gt;=</span> <span class="dv">2000</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id  month  day  ...  hindfoot_length_mm  weight_g weight_mg
30158      30159      1    8  ...                22.0      17.0   17000.0
30159      30160      1    8  ...                35.0      53.0   53000.0
30160      30161      1    8  ...                21.0      17.0   17000.0
30161      30162      1    8  ...                36.0      50.0   50000.0
30162      30163      1    8  ...                20.0      16.0   16000.0
...          ...    ...  ...  ...                 ...       ...       ...
35544      35545     12   31  ...                 NaN       NaN       NaN
35545      35546     12   31  ...                 NaN       NaN       NaN
35546      35547     12   31  ...                15.0      14.0   14000.0
35547      35548     12   31  ...                36.0      51.0   51000.0
35548      35549     12   31  ...                 NaN       NaN       NaN

[5391 rows x 10 columns]</code></pre>
</div>
<p>As with <code>rename()</code> above, each filtering operation returns a copy of the dataframe. We will look at how to make changes to the original dataframe at the end of this lesson.</p>
</section><section id="building-more-complex-queries"><h2 class="section-heading">Building more complex queries</h2>
<hr class="half-width">
<p>You can combine conditionals using <em>bitwise operators</em>:</p>
<ul>
<li>
<code>&amp;</code>: True if conditions on both sides of the operator are True</li>
<li>
<code>|</code>: True if a condition on either side is True</li>
</ul>
<p>To return all observations of DM in or after 2000, we can combine the two conditionals we used previously. Note that, when joining conditionals using <code>&amp;</code> or <code>|</code>, you should wrap each condition in parentheses. If you omit the parentheses, <code>pandas</code> will not perform the comparisons in the expected order.</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>surveys[(surveys[<span class="st">"species_id"</span>] <span class="op">==</span> <span class="st">"DM"</span>) <span class="op">&amp;</span> (surveys[<span class="st">"year"</span>] <span class="op">&gt;=</span> <span class="dv">2000</span>)]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id  month  day  year  ...  sex hindfoot_length_mm weight_g  weight_mg
30161      30162      1    8  2000  ...    M               36.0     50.0    50000.0
30178      30179      1    8  2000  ...    M               36.0     60.0    60000.0
30195      30196      1    8  2000  ...    M               37.0     52.0    52000.0
30196      30197      1    8  2000  ...    F               34.0     43.0    43000.0
30209      30210      1    8  2000  ...    M               38.0     56.0    56000.0
...          ...    ...  ...   ...  ...  ...                ...      ...        ...
35532      35533     12   31  2002  ...    F               36.0     48.0    48000.0
35533      35534     12   31  2002  ...    M               37.0     56.0    56000.0
35534      35535     12   31  2002  ...    M               37.0     53.0    53000.0
35535      35536     12   31  2002  ...    F               35.0     42.0    42000.0
35536      35537     12   31  2002  ...    F               36.0     46.0    46000.0

[847 rows x 10 columns]</code></pre>
</div>
<p><code>pandas</code> also provides methods that can be used for filtering. One example is <code>isin()</code>, which is used to match a list of values. This method can be combined with other conditionals as above. The example below returns rows from 2000 or later with either “DM”, “DO”, or “DS” in the species_id column:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>surveys[surveys[<span class="st">"species_id"</span>].isin([<span class="st">"DM"</span>, <span class="st">"DO"</span>, <span class="st">"DS"</span>]) <span class="op">&amp;</span> (surveys[<span class="st">"year"</span>] <span class="op">&gt;=</span> <span class="dv">2000</span>)]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id  month  day  year  ...  sex hindfoot_length_mm weight_g  weight_mg
30159      30160      1    8  2000  ...    M               35.0     53.0    53000.0
30161      30162      1    8  2000  ...    M               36.0     50.0    50000.0
30166      30167      1    8  2000  ...    M               35.0     41.0    41000.0
30170      30171      1    8  2000  ...    M               36.0     52.0    52000.0
30172      30173      1    8  2000  ...    F               35.0     54.0    54000.0
...          ...    ...  ...   ...  ...  ...                ...      ...        ...
35533      35534     12   31  2002  ...    M               37.0     56.0    56000.0
35534      35535     12   31  2002  ...    M               37.0     53.0    53000.0
35535      35536     12   31  2002  ...    F               35.0     42.0    42000.0
35536      35537     12   31  2002  ...    F               36.0     46.0    46000.0
35547      35548     12   31  2002  ...    M               36.0     51.0    51000.0

[1268 rows x 10 columns]</code></pre>
</div>
</section><section id="sorting"><h2 class="section-heading">Sorting</h2>
<hr class="half-width">
<p>You can sort a dataframe using the <code>sort_values()</code> method. For this example, we’ll work from the subset defined above. First we need to assign that query to a variable:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> surveys[</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>    surveys[<span class="st">"species_id"</span>].isin([<span class="st">"DM"</span>, <span class="st">"DO"</span>, <span class="st">"DS"</span>]) <span class="op">&amp;</span> (surveys[<span class="st">"year"</span>] <span class="op">&gt;=</span> <span class="dv">2000</span>)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>]</span></code></pre>
</div>
<p>Now we’ll sort results by <code>weight_g</code>. To do so, pass that column name as an argument (that is, inside the trailing parentheses) to the <code>sort_values()</code> method:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>results.sort_values(<span class="st">"weight_g"</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id  month  day  year  ...  sex hindfoot_length_mm weight_g  weight_mg
30614      30615      4   30  2000  ...    M               34.0     18.0    18000.0
34790      34791     10    5  2002  ...    M               34.0     20.0    20000.0
32782      32783      9   23  2001  ...    M               34.0     21.0    21000.0
32650      32651      9   22  2001  ...    F               33.0     21.0    21000.0
34345      34346      6   16  2002  ...    M               34.0     22.0    22000.0
...          ...    ...  ...   ...  ...  ...                ...      ...        ...
34724      34725      9   10  2002  ...    M               38.0      NaN        NaN
34950      34951     10    6  2002  ...    F               36.0      NaN        NaN
35088      35089     11   10  2002  ...    F               35.0      NaN        NaN
35387      35388     12   29  2002  ...    M               35.0      NaN        NaN
35485      35486     12   29  2002  ...    M               37.0      NaN        NaN

[1268 rows x 10 columns]</code></pre>
</div>
<p>By default, rows are sorted in <em>ascending</em> order (smallest to largest). You can modify this behavior using the ascending keyword argument:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>results.sort_values(<span class="st">"weight_g"</span>, ascending<span class="op">=</span><span class="va">False</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id  month  day  year  ...  sex hindfoot_length_mm weight_g  weight_mg
31955      31956      4   21  2001  ...    F               36.0     76.0    76000.0
31942      31943      4   21  2001  ...    F               37.0     68.0    68000.0
32041      32042      5   26  2001  ...    F               37.0     68.0    68000.0
30441      30442      3    4  2000  ...    F                NaN     66.0    66000.0
35159      35160     11   10  2002  ...    F               36.0     65.0    65000.0
...          ...    ...  ...   ...  ...  ...                ...      ...        ...
34724      34725      9   10  2002  ...    M               38.0      NaN        NaN
34950      34951     10    6  2002  ...    F               36.0      NaN        NaN
35088      35089     11   10  2002  ...    F               35.0      NaN        NaN
35387      35388     12   29  2002  ...    M               35.0      NaN        NaN
35485      35486     12   29  2002  ...    M               37.0      NaN        NaN

[1268 rows x 10 columns]</code></pre>
</div>
<p>You can sort on multiple fields at once by passing a list of column names. You can control how each column sorts by passing a list of the same length to the ascending keyword:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>results.sort_values([<span class="st">"species_id"</span>, <span class="st">"weight_g"</span>], ascending<span class="op">=</span>[<span class="va">True</span>, <span class="va">False</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id  month  day  ...  hindfoot_length_mm  weight_g weight_mg
34126      34127      5   16  ...                35.0      64.0   64000.0
30178      30179      1    8  ...                36.0      60.0   60000.0
31858      31859      3   24  ...                36.0      60.0   60000.0
32909      32910     10   14  ...                37.0      60.0   60000.0
34604      34605      7   14  ...                36.0      60.0   60000.0
...          ...    ...  ...  ...                 ...       ...       ...
33960      33961      5   15  ...                36.0       NaN       NaN
34072      34073      5   16  ...                34.0       NaN       NaN
34437      34438      7   13  ...                 NaN       NaN       NaN
35387      35388     12   29  ...                35.0       NaN       NaN
35485      35486     12   29  ...                37.0       NaN       NaN

[1268 rows x 10 columns]</code></pre>
</div>
<p>As with the dataframe methods above, <code>sort_values()</code> returns a copy of the original dataframe and leaves the original untouched.</p>
<div id="challenge2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Write a query that returns year, species_id, and weight in kg from the surveys table, sorted with the largest weights at the top.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new column with weight in kg</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>surveys[<span class="st">"weight_kg"</span>] <span class="op">=</span> surveys[<span class="st">"weight_g"</span>] <span class="op">/</span> <span class="dv">1000</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a subset containing only year, species_id, and weight_kg</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>subset <span class="op">=</span> surveys[[<span class="st">"year"</span>, <span class="st">"species_id"</span>, <span class="st">"weight_kg"</span>]]</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort the subset by weight_kg</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>subset <span class="op">=</span> subset.sort_values(<span class="st">"weight_kg"</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>subset</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       year species_id  weight_kg
33048  2001         NL      0.280
12870  1987         NL      0.278
15458  1989         NL      0.275
2132   1979         NL      0.274
12728  1987         NL      0.270
...     ...        ...        ...
35530  2002         PB        NaN
35543  2002         US        NaN
35544  2002         AH        NaN
35545  2002         AH        NaN
35548  2002        NaN        NaN

[35549 rows x 3 columns]</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section id="modifying-data"><h2 class="section-heading">Modifying data</h2>
<hr class="half-width">
<p>We’ve already shown how to modify an existing a dataframe by adding a new column. What if we want to modify existing cells instead? As we’ve seen, this can be a little tricky in <code>pandas</code> because most of its methods return a copy of the original dataframe. For example, you can easily look at subsets of a dataframe using square brackets. The cell below returns the species_id column for rows 2 through 5:</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>surveys[<span class="dv">2</span>:<span class="dv">6</span>][<span class="st">"species_id"</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>2    DM
3    DM
4    DM
5    PF
Name: species_id, dtype: object</code></pre>
</div>
<p>But trying to set new values using this syntax may not work as expected. Say we want to set the species_id column to a new value, “CAT”. Try running the code in the cell below:</p>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>surveys[<span class="dv">2</span>:<span class="dv">6</span>][<span class="st">"species_id"</span>] <span class="op">=</span> <span class="st">"CAT"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;string&gt;:1: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy</code></pre>
</div>
<p>You should have received a <code>SettingWithCopyWarning</code> warning after running that cell. This warning tells you that the data in the original dataframe has not been modified. This is because the square brackets returned a copy, meaning that any changes will be reflected in the copy, not the original. We can verify that the original dataframe has not been changed by displaying the rows that would have been affected by this changed:</p>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>surveys[<span class="dv">2</span>:<span class="dv">6</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   record_id  month  day  ...  weight_g  weight_mg weight_kg
2          3      7   16  ...       NaN        NaN       NaN
3          4      7   16  ...       NaN        NaN       NaN
4          5      7   16  ...       NaN        NaN       NaN
5          6      7   16  ...       NaN        NaN       NaN

[4 rows x 11 columns]</code></pre>
</div>
<div class="section level3">
<h3 id="using-loc-to-modify-existing-cells">Using loc to modify existing cells<a class="anchor" aria-label="anchor" href="#using-loc-to-modify-existing-cells"></a>
</h3>
<p>One way to modify existing data in <code>pandas</code> is to use the <code>loc</code> attribute. This attribute allows you to extract and modify cells in a DataFrame using the following syntax: <code>df.loc[row_indexer, col_indexer]</code>.</p>
<p>The <em>row_indexer</em> argument is used to select one or more rows. It can be:</p>
<ul>
<li>A row label (i.e., the bold column on the far left)
<ul>
<li>
<code>0</code> returns the row with label 0</li>
</ul>
</li>
<li>A slice including multiple rows:
<ul>
<li>
<code>:</code> returns all rows</li>
<li>
<code>:2</code> returns all rows from the beginning of the dataframe to the row labeled 2, <em>inclusive</em>
</li>
<li>
<code>2:</code> returns all rows from the row labeled 2 to the end of the dataframe, <em>inclusive</em>
</li>
<li>
<code>2:5</code> returns all rows between those labeled 2 and 5, <em>inclusive</em>
</li>
</ul>
</li>
<li>A conditional, as in the examples above.</li>
</ul>
<p>The <em>col_indexer</em> argument is used to select one or more columns. It will typically be a list of column names and can be omitted, in which case all columns will be returned.</p>
<div id="callout2" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>The row labels in this dataframe happen to be numeric and aligned exactly to the row’s index (so for the first row both the index and the label are 0, for the second row both the index and the label are 1, etc.) This is often <strong>but not always</strong> true in pandas. For example, if we used record_id as the label, the row labels would be one-based and the row indexes would be zero-based.</p>
</div>
</div>
</div>
<div id="callout3" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>Slices using <code>loc</code> are inclusive–rows matching both the start and end values are included in the returned slice. This differs from list slices, where the start but not end value is included in the slice. <code>loc</code> works this way because it is looking at the row <em>label</em>, not the row <em>index</em>.</p>
</div>
</div>
</div>
<p>We’ll be making some changes to our data, so let’s work from a copy instead of modifying the original:</p>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>surveys_copy <span class="op">=</span> surveys.copy()</span></code></pre>
</div>
<p>To select a subset of rows and columns using <code>loc</code>, use:</p>
<div class="codewrapper sourceCode" id="cb59">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>surveys_copy.loc[</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2</span>:<span class="dv">5</span>, <span class="st">"species_id"</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>]  <span class="co"># note that we use 2:5 with loc (end index included)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>2    DM
3    DM
4    DM
5    PF
Name: species_id, dtype: object</code></pre>
</div>
<p>Unlike the methods earlier in the lesson, this is a view, not a copy, of the data in the surveys_copy dataframe. We can now assign a new value to the species_id column in the matching rows of the original dataframe:</p>
<div class="codewrapper sourceCode" id="cb61">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>surveys_copy.loc[<span class="dv">2</span>:<span class="dv">5</span>, <span class="st">"species_id"</span>] <span class="op">=</span> <span class="st">"CAT"</span></span></code></pre>
</div>
<p>We can see that these changes are reflected in the original surveys_copy object:</p>
<div class="codewrapper sourceCode" id="cb62">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>surveys_copy.loc[<span class="dv">1</span>:<span class="dv">6</span>, <span class="st">"species_id"</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1     NL
2    CAT
3    CAT
4    CAT
5    CAT
6     PE
Name: species_id, dtype: object</code></pre>
</div>
<div id="callout4" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p><code>pandas</code> provides another indexer, <code>iloc</code>, that allows you to select and modify data using row and column indexes instead of labels. Learn more in the <a href="https://pandas.pydata.org/pandas-%20docs/stable/reference/api/pandas.DataFrame.iloc.html" class="external-link"><code>pandas</code> documentation</a>.</p>
</div>
</div>
</div>
<!-- 
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use. 
 -->
</div>
</section></section><section id="aio-04-aggregating-and-grouping-data"><p>Content from <a href="04-aggregating-and-grouping-data.html">Aggregating and Grouping Data</a></p>
<hr>
<p> Last updated on 2022-05-10 | <a href="https://github.com/adamancer/python-ecology-lesson-alt/edit/main/episodes/04-aggregating-and-grouping-data.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do we calculate statistics using pandas?</li>
<li>How do we group data using pandas?</li>
<li>How do null values affect calculations using pandas?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Introduce aggregation calculations in pandas</li>
<li>Introduce grouping in pandas</li>
<li>Learn about how pandas handles null values</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>As always, we’ll begin by importing pandas and reading our CSV:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>surveys <span class="op">=</span> pd.read_csv(<span class="st">"data/surveys.csv"</span>)</span></code></pre>
</div>
<section id="aggregating-data"><h2 class="section-heading">Aggregating data</h2>
<hr class="half-width">
<p>Aggregation allows us to combine results by grouping records based on value. It is also useful for calculating combined values in groups.</p>
<p>Let’s go to the surveys table and find out how many observations are in our dataset. We’ve already seen that we can use the <code>info()</code> method to get high-level about the dataset, including the number of entries. What if just wanted the number of rows? In that case, we can use the built-in function <code>len()</code>, which is used to calculate the number of items in an object (for example, the number of characters in a string or the number of items in a list). When used on a dataframe, <code>len()</code> returns the number of rows:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(surveys)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span class="fl">35549</span></code></pre>
</div>
<p><code>pandas</code> also provides a suite of aggregation methods. For example, we can find out the total weight of all the individuals in grams using <code><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum()</a></code>:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>surveys[<span class="st">"weight"</span>].<span class="bu">sum</span>()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span class="fl">1377594.0</span></code></pre>
</div>
<p>Other aggregation methods supported by pandas include <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min()</a></code>, <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max()</a></code>, and <code><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean()</a></code>.</p>
<div id="challenge1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Calculate the total weight, average weight, minimum and maximum weights for all animals caught over the duration of the survey. Can you modify your code so that it outputs these values only for weights between 5 and 10 grams?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a subset of only the animals between 5 and 10 grams</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>weights <span class="op">=</span> surveys[(surveys[<span class="st">"weight"</span>] <span class="op">&gt;</span> <span class="dv">5</span>) <span class="op">&amp;</span> (surveys[<span class="st">"weight"</span>] <span class="op">&lt;</span> <span class="dv">10</span>)][<span class="st">"weight"</span>]</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Display aggregation calculations using a dict</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"sum"</span>: weights.<span class="bu">sum</span>(),</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"mean"</span>: weights.mean(),</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"min"</span>: weights.<span class="bu">min</span>(),</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"max"</span>: weights.<span class="bu">max</span>(),</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>{'sum': 16994.0, 'mean': 7.91523055426176, 'min': 6.0, 'max': 9.0}</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>To quickly generate summary statistics, we can use the <code>describe()</code> method. When you use this method on a dataframe, it calculates stats for all columns with numeric data:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>surveys.describe()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>          record_id         month  ...  hindfoot_length        weight
count  35549.000000  35549.000000  ...     31438.000000  32283.000000
mean   17775.000000      6.477847  ...        29.287932     42.672428
std    10262.256696      3.396925  ...         9.564759     36.631259
min        1.000000      1.000000  ...         2.000000      4.000000
25%     8888.000000      4.000000  ...        21.000000     20.000000
50%    17775.000000      6.000000  ...        32.000000     37.000000
75%    26662.000000     10.000000  ...        36.000000     48.000000
max    35549.000000     12.000000  ...        70.000000    280.000000

[8 rows x 7 columns]</code></pre>
</div>
<p>You can see that <code>describe()</code> isn’t picky: It includes both ID and date columns in its results. Notice also that the counts differ in between columns. This is because <code>count()</code> only counts non-NaN rows.</p>
<p>If you prefer, you can also describe a single column at a time:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>surveys[<span class="st">"weight"</span>].describe()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>count    32283.000000
mean        42.672428
std         36.631259
min          4.000000
25%         20.000000
50%         37.000000
75%         48.000000
max        280.000000
Name: weight, dtype: float64</code></pre>
</div>
<p>If you need more control over the output (for example, if you want to calculate the total weight of all animals, as in the challenge above), pandas provides the <code>agg()</code> method:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>surveys.agg({<span class="st">"weight"</span>: [<span class="st">"sum"</span>, <span class="st">"mean"</span>, <span class="st">"min"</span>, <span class="st">"max"</span>]})</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>            weight
sum   1.377594e+06
mean  4.267243e+01
min   4.000000e+00
max   2.800000e+02</code></pre>
</div>
</section><section id="grouping-data"><h2 class="section-heading">Grouping data</h2>
<hr class="half-width">
<p>Now, let’s see how many individuals were counted in each species. We do this using <code>groupby()</code>, which creates an object similar to a dataframe where rows are grouped by the data in one or more columns:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>grouped <span class="op">=</span> surveys.groupby(<span class="st">"species_id"</span>)</span></code></pre>
</div>
<p>When we aggregate the grouped data, <code>pandas</code> provides separate calculations for each member of the group. In the example below, we’ll calculate the number of times each species appears in the dataset:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>grouped[<span class="st">"species_id"</span>].count()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>species_id
AB      303
AH      437
AS        2
BA       46
CB       50
CM       13
CQ       16
CS        1
CT        1
CU        1
CV        1
DM    10596
DO     3027
DS     2504
DX       40
NL     1252
OL     1006
OT     2249
OX       12
PB     2891
PC       39
PE     1299
PF     1597
PG        8
PH       32
PI        9
PL       36
PM      899
PP     3123
PU        5
PX        6
RF       75
RM     2609
RO        8
RX        2
SA       75
SC        1
SF       43
SH      147
SO       43
SS      248
ST        1
SU        5
UL        4
UP        8
UR       10
US        4
ZL        2
Name: species_id, dtype: int64</code></pre>
</div>
<div id="challenge2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Write statements that return:</p>
<ol style="list-style-type: decimal">
<li>How many individuals were counted in each year in total</li>
<li>How many were counted each year, for each different species</li>
<li>The average weights of each species in each year</li>
<li>How many individuals were counted for each species that was observed more than 10 times</li>
</ol>
<p>Can you get the answer to both 2 and 3 in a single query?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Show me the solution to challenge 1
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Individual counts per year</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>surveys.groupby(<span class="st">"year"</span>)[<span class="st">"record_id"</span>].count()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>year
1977     503
1978    1048
1979     719
1980    1415
1981    1472
1982    1978
1983    1673
1984     981
1985    1438
1986     942
1987    1671
1988    1469
1989    1569
1990    1311
1991    1347
1992    1038
1993     750
1994     668
1995    1222
1996    1706
1997    2493
1998    1610
1999    1135
2000    1552
2001    1610
2002    2229
Name: record_id, dtype: int64</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Show me the solution to challenge 2
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Individual counts by species and year</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>surveys.groupby([<span class="st">"year"</span>, <span class="st">"species_id"</span>])[<span class="st">"record_id"</span>].count()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>year  species_id
1977  DM            264
      DO             12
      DS             98
      NL             31
      OL             10
                   ... 
2002  SF              7
      SH             11
      SS              9
      UR              1
      US              4
Name: record_id, Length: 509, dtype: int64</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Show me the solution to challenge 3
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mean weight by species and year</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>surveys.groupby([<span class="st">"year"</span>, <span class="st">"species_id"</span>])[<span class="st">"weight"</span>].mean()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>year  species_id
1977  DM             41.141304
      DO             42.666667
      DS            121.437500
      NL                   NaN
      OL             21.666667
                       ...    
2002  SF             62.166667
      SH             64.666667
      SS                   NaN
      UR                   NaN
      US                   NaN
Name: weight, Length: 509, dtype: float64</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Show me the solution to challenge 4
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Counts by species that appear more than 10 times</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>species <span class="op">=</span> surveys.groupby(<span class="st">"species_id"</span>)[<span class="st">"record_id"</span>].count()</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>species[species <span class="op">&gt;</span> <span class="dv">10</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>species_id
AB      303
AH      437
BA       46
CB       50
CM       13
CQ       16
DM    10596
DO     3027
DS     2504
DX       40
NL     1252
OL     1006
OT     2249
OX       12
PB     2891
PC       39
PE     1299
PF     1597
PH       32
PL       36
PM      899
PP     3123
RF       75
RM     2609
SA       75
SF       43
SH      147
SO       43
SS      248
Name: record_id, dtype: int64</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">
  Show me the solution to challenges 2 and 3 combined
  </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" data-bs-parent="#accordionSolution6" aria-labelledby="headingSolution6">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Counts and mean weight by species and year</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>surveys.groupby([<span class="st">"year"</span>, <span class="st">"species_id"</span>]).agg({<span class="st">"record_id"</span>: <span class="st">"count"</span>, <span class="st">"weight"</span>: <span class="st">"mean"</span>})</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                 record_id      weight
year species_id                       
1977 DM                264   41.141304
     DO                 12   42.666667
     DS                 98  121.437500
     NL                 31         NaN
     OL                 10   21.666667
...                    ...         ...
2002 SF                  7   62.166667
     SH                 11   64.666667
     SS                  9         NaN
     UR                  1         NaN
     US                  4         NaN

[509 rows x 2 columns]</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section id="handling-missing-data"><h2 class="section-heading">Handling missing data</h2>
<hr class="half-width">
<p>You may have noticed that some columns in the surveys dataframe have the value NaN instead of text or numbers. NaN, short for “not a number,” is a special type of float used by pandas to represent missing data. When reading from a CSV, as we have done throughout this lesson, pandas interprets certains values as NaN (see <em>na_values</em> in the <a href="https://pandas.pydata.org/pandas-%20docs/stable/reference/api/pandas.read_csv.html" class="external-link">pd.read_csv() documentation</a> for the default list). NaNs are excluded from most aggregation calculations in <code>pandas</code>, including counts.</p>
<p>It is crucial to understand how missing data is represented in your dataset. Failing to do so may introduce errors into your analysis. The ecology dataset used in this lesson uses empty cells to represent missing data, but other disciplines have different conventions. For example, some geographic datasets use -9999 to represent null values. Failure to convert that value to NaN would produce significant errors in any calculations performed on that dataset.</p>
<!-- 
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use. 
 -->
</section></section><section id="aio-05-combining-data-with-joins"><p>Content from <a href="05-combining-data-with-joins.html">Combining Dataframes</a></p>
<hr>
<p> Last updated on 2022-05-10 | <a href="https://github.com/adamancer/python-ecology-lesson-alt/edit/main/episodes/05-combining-data-with-joins.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do we combine data from multiple sources using pandas?</li>
<li>How do we add data to an existing dataframe?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Use merge to add species info to the survey dataset</li>
<li>Use concat to add additional rows the dataset</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Dataframes are used to organize and group data by common characteristics or principles. Often, we need to combine elements from separate tables into a single tables or queries for analysis and visualization. A join allows use to combine two dataframes using values common to each.</p>
<p>The survey dataframe we’ve been using throughout this lesson has a column called species_id. We used this column in the previous lesson to calculate summary statistics about observations of each species. But the species_id is just a two-letter code–what does each code stand for? To find out, we’ll now load both the survey dataset and a second dataset containing more detailed information about the various species observed:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>surveys <span class="op">=</span> pd.read_csv(<span class="st">"data/surveys.csv"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>species <span class="op">=</span> pd.read_csv(<span class="st">"data/species.csv"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>species</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   species_id             genus          species     taxa
0          AB        Amphispiza        bilineata     Bird
1          AH  Ammospermophilus          harrisi   Rodent
2          AS        Ammodramus       savannarum     Bird
3          BA           Baiomys          taylori   Rodent
4          CB   Campylorhynchus  brunneicapillus     Bird
5          CM       Calamospiza      melanocorys     Bird
6          CQ        Callipepla         squamata     Bird
7          CS          Crotalus       scutalatus  Reptile
8          CT     Cnemidophorus           tigris  Reptile
9          CU     Cnemidophorus        uniparens  Reptile
10         CV          Crotalus          viridis  Reptile
11         DM         Dipodomys         merriami   Rodent
12         DO         Dipodomys            ordii   Rodent
13         DS         Dipodomys      spectabilis   Rodent
14         DX         Dipodomys              sp.   Rodent
15         EO           Eumeces        obsoletus  Reptile
16         GS          Gambelia            silus  Reptile
17         NL           Neotoma         albigula   Rodent
18         NX           Neotoma              sp.   Rodent
19         OL         Onychomys      leucogaster   Rodent
20         OT         Onychomys         torridus   Rodent
21         OX         Onychomys              sp.   Rodent
22         PB       Chaetodipus          baileyi   Rodent
23         PC            Pipilo        chlorurus     Bird
24         PE        Peromyscus         eremicus   Rodent
25         PF       Perognathus           flavus   Rodent
26         PG         Pooecetes        gramineus     Bird
27         PH       Perognathus         hispidus   Rodent
28         PI       Chaetodipus      intermedius   Rodent
29         PL        Peromyscus         leucopus   Rodent
30         PM        Peromyscus      maniculatus   Rodent
31         PP       Chaetodipus     penicillatus   Rodent
32         PU            Pipilo           fuscus     Bird
33         PX       Chaetodipus              sp.   Rodent
34         RF   Reithrodontomys       fulvescens   Rodent
35         RM   Reithrodontomys        megalotis   Rodent
36         RO   Reithrodontomys         montanus   Rodent
37         RX   Reithrodontomys              sp.   Rodent
38         SA        Sylvilagus        audubonii   Rabbit
39         SB          Spizella          breweri     Bird
40         SC        Sceloporus           clarki  Reptile
41         SF          Sigmodon      fulviventer   Rodent
42         SH          Sigmodon         hispidus   Rodent
43         SO          Sigmodon     ochrognathus   Rodent
44         SS      Spermophilus        spilosoma   Rodent
45         ST      Spermophilus     tereticaudus   Rodent
46         SU        Sceloporus        undulatus  Reptile
47         SX          Sigmodon              sp.   Rodent
48         UL            Lizard              sp.  Reptile
49         UP            Pipilo              sp.     Bird
50         UR            Rodent              sp.   Rodent
51         US           Sparrow              sp.     Bird
52         ZL       Zonotrichia       leucophrys     Bird
53         ZM           Zenaida         macroura     Bird</code></pre>
</div>
<p>We can see that the species dataframe includes a genus, species, and taxon for each species_id. This is much more useful than the species_id included in the original dataframe–how can we add that data to our surveys dataframe? Adding it by hand would be tedious and error prone. Fortunately, <code>pandas</code> provides the <code><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge()</a></code> method to join two dataframes.</p>
<p>To merge the surveys and species dataframes, use:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>merged <span class="op">=</span> surveys.merge(species)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>merged</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id  month  day  year  ...  weight          genus   species     taxa
0              1      7   16  1977  ...     NaN        Neotoma  albigula   Rodent
1              2      7   16  1977  ...     NaN        Neotoma  albigula   Rodent
2             22      7   17  1977  ...     NaN        Neotoma  albigula   Rodent
3             38      7   17  1977  ...     NaN        Neotoma  albigula   Rodent
4             72      8   19  1977  ...     NaN        Neotoma  albigula   Rodent
...          ...    ...  ...   ...  ...     ...            ...       ...      ...
34781      28988     12   23  1998  ...     NaN  Cnemidophorus    tigris  Reptile
34782      35512     12   31  2002  ...     NaN        Sparrow       sp.     Bird
34783      35513     12   31  2002  ...     NaN        Sparrow       sp.     Bird
34784      35528     12   31  2002  ...     NaN        Sparrow       sp.     Bird
34785      35544     12   31  2002  ...     NaN        Sparrow       sp.     Bird

[34786 rows x 12 columns]</code></pre>
</div>
<p>Following the merge, the genus, species, and taxa columns have all been added to the survey dataframe. We can now use those columns to filter and summarize our data.</p>
<div id="callout1" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>The <code>pd.merge()</code> method is equivalent to the JOIN operation in SQL</p>
</div>
</div>
</div>
<div id="challenge1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Filter the merged dataframe to show the genus, the species name, and the weight for every individual captured at the site</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>merged[[<span class="st">"genus"</span>, <span class="st">"species"</span>, <span class="st">"weight"</span>]]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>               genus   species  weight
0            Neotoma  albigula     NaN
1            Neotoma  albigula     NaN
2            Neotoma  albigula     NaN
3            Neotoma  albigula     NaN
4            Neotoma  albigula     NaN
...              ...       ...     ...
34781  Cnemidophorus    tigris     NaN
34782        Sparrow       sp.     NaN
34783        Sparrow       sp.     NaN
34784        Sparrow       sp.     NaN
34785        Sparrow       sp.     NaN

[34786 rows x 3 columns]</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>In the example above, we didn’t provide any information about how we wanted to merge the dataframes together, so pandas made an educated guess. It looked at the columns in each of the dataframes, then merged them based on the columns that appear in both. Here, the only shared name is species_id. If we want to control what columns are used to merge, we can use the <em>on</em> keyword argument:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>surveys.merge(species, on<span class="op">=</span><span class="st">"species_id"</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id  month  day  year  ...  weight          genus   species     taxa
0              1      7   16  1977  ...     NaN        Neotoma  albigula   Rodent
1              2      7   16  1977  ...     NaN        Neotoma  albigula   Rodent
2             22      7   17  1977  ...     NaN        Neotoma  albigula   Rodent
3             38      7   17  1977  ...     NaN        Neotoma  albigula   Rodent
4             72      8   19  1977  ...     NaN        Neotoma  albigula   Rodent
...          ...    ...  ...   ...  ...     ...            ...       ...      ...
34781      28988     12   23  1998  ...     NaN  Cnemidophorus    tigris  Reptile
34782      35512     12   31  2002  ...     NaN        Sparrow       sp.     Bird
34783      35513     12   31  2002  ...     NaN        Sparrow       sp.     Bird
34784      35528     12   31  2002  ...     NaN        Sparrow       sp.     Bird
34785      35544     12   31  2002  ...     NaN        Sparrow       sp.     Bird

[34786 rows x 12 columns]</code></pre>
</div>
<div id="challenge2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Compare the number of rows in the original and merged survey dataframes. How do they differ? Why do you think that might be?</p>
<p><strong>Hint:</strong> Use <code>pd.unique()</code> method to look at the species_id column in each dataframe.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Some columns in survey are missing species_id</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="bu">set</span>(surveys[<span class="st">"species_id"</span>]) <span class="op">-</span> <span class="bu">set</span>(species[<span class="st">"species_id"</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span class="op">{</span><span class="va">nan</span><span class="op">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>In practice, the values in the columns used to join two dataframes may not align exactly. Above, the surveys dataframe contains a few hundred rows where species_id is NaN. These are the rows that were dropped when the dataframes were merged.</p>
<p>By default, <code><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge()</a></code> performs an <strong>inner join</strong>. This means that a row will only appear if the value in the shared column appears in both of the datasets being merged. In this case, that means that survey observations that don’t have a species_id or have a species_id that does not appear in the species dataframe will be dropped.</p>
<p>This is not always desirable behavior. Fortunately, <code>pandas</code> allows us to control how the merge is done.</p>
<ul>
<li>
<strong>Inner:</strong> Includes all rows with common values in the join column</li>
<li>
<strong>Left:</strong> Include all rows from the left dataframe. Columns from the right dataframe are populated if a common value exists and set to NaN if not.</li>
<li>
<strong>Right:</strong> Include all rows from the right dataframe. Columns from the left dataframe are populated if a common value exists and set to NaN if not.</li>
<li>
<strong>Outer:</strong> Includes all rows from both dataframes</li>
</ul>
<p>We want to keep all of our observations, so let’s do a left join instead. To specify the type of merge, we use the <em>how</em> keyword argument:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>surveys.merge(species, how<span class="op">=</span><span class="st">"left"</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id  month  day  year  ...  weight             genus    species    taxa
0              1      7   16  1977  ...     NaN           Neotoma   albigula  Rodent
1              2      7   16  1977  ...     NaN           Neotoma   albigula  Rodent
2              3      7   16  1977  ...     NaN         Dipodomys   merriami  Rodent
3              4      7   16  1977  ...     NaN         Dipodomys   merriami  Rodent
4              5      7   16  1977  ...     NaN         Dipodomys   merriami  Rodent
...          ...    ...  ...   ...  ...     ...               ...        ...     ...
35544      35545     12   31  2002  ...     NaN  Ammospermophilus    harrisi  Rodent
35545      35546     12   31  2002  ...     NaN  Ammospermophilus    harrisi  Rodent
35546      35547     12   31  2002  ...    14.0   Reithrodontomys  megalotis  Rodent
35547      35548     12   31  2002  ...    51.0         Dipodomys      ordii  Rodent
35548      35549     12   31  2002  ...     NaN               NaN        NaN     NaN

[35549 rows x 12 columns]</code></pre>
</div>
<p>Now all 35,549 rows appear in the merged dataframe.</p>
<section id="appending-rows-to-a-dataframe"><h2 class="section-heading">Appending rows to a dataframe</h2>
<hr class="half-width">
<p>Merges address the case where information about the same set of observations is spread across multiple files. What about when the observations themselves are split into more than one file? For a survey like the one we’ve been looking at in this lesson, we might get a new file once a year with the same columns that represent a completely new set of observations. How can we add those new observations to our dataframe?</p>
<p>We’ll simulate this kind of thing by splitting two years worth of data into separate dataframes. We can do this using conditionals, as we saw in lesson 3:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>surveys_2001 <span class="op">=</span> surveys[surveys[<span class="st">"year"</span>] <span class="op">==</span> <span class="dv">2001</span>].copy()</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>surveys_2001</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id  month  day  year  ...  species_id  sex hindfoot_length  weight
31710      31711      1   21  2001  ...          PB    F            26.0    25.0
31711      31712      1   21  2001  ...          DM    M            37.0    43.0
31712      31713      1   21  2001  ...          PB    M            29.0    44.0
31713      31714      1   21  2001  ...          DO    M            34.0    53.0
31714      31715      1   21  2001  ...          OT    M            20.0    27.0
...          ...    ...  ...   ...  ...         ...  ...             ...     ...
33315      33316     12   16  2001  ...         NaN  NaN             NaN     NaN
33316      33317     12   16  2001  ...         NaN  NaN             NaN     NaN
33317      33318     12   16  2001  ...         NaN  NaN             NaN     NaN
33318      33319     12   16  2001  ...         NaN  NaN             NaN     NaN
33319      33320     12   16  2001  ...         NaN  NaN             NaN     NaN

[1610 rows x 9 columns]</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>surveys_2002 <span class="op">=</span> surveys[surveys[<span class="st">"year"</span>] <span class="op">==</span> <span class="dv">2002</span>].copy()</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>surveys_2002</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id  month  day  year  ...  species_id  sex hindfoot_length  weight
33320      33321      1   12  2002  ...          DM    M            38.0    44.0
33321      33322      1   12  2002  ...          DO    M            37.0    58.0
33322      33323      1   12  2002  ...          PB    M            28.0    45.0
33323      33324      1   12  2002  ...          AB  NaN             NaN     NaN
33324      33325      1   12  2002  ...          DO    M            35.0    29.0
...          ...    ...  ...   ...  ...         ...  ...             ...     ...
35544      35545     12   31  2002  ...          AH  NaN             NaN     NaN
35545      35546     12   31  2002  ...          AH  NaN             NaN     NaN
35546      35547     12   31  2002  ...          RM    F            15.0    14.0
35547      35548     12   31  2002  ...          DO    M            36.0    51.0
35548      35549     12   31  2002  ...         NaN  NaN             NaN     NaN

[2229 rows x 9 columns]</code></pre>
</div>
<p>We now have two different dataframes with the same columns but different data, one with 1,610 rows, the other with 2,229 rows. We can combine them using <code>pd.concat()</code>, which stacks the dataframes horizontally (that is, it appends the 2002 dataset to the 2001 dataset):</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>surveys_2001_2002 <span class="op">=</span> pd.concat([surveys_2001, surveys_2002])</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>surveys_2001_2002</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id  month  day  year  ...  species_id  sex hindfoot_length  weight
31710      31711      1   21  2001  ...          PB    F            26.0    25.0
31711      31712      1   21  2001  ...          DM    M            37.0    43.0
31712      31713      1   21  2001  ...          PB    M            29.0    44.0
31713      31714      1   21  2001  ...          DO    M            34.0    53.0
31714      31715      1   21  2001  ...          OT    M            20.0    27.0
...          ...    ...  ...   ...  ...         ...  ...             ...     ...
35544      35545     12   31  2002  ...          AH  NaN             NaN     NaN
35545      35546     12   31  2002  ...          AH  NaN             NaN     NaN
35546      35547     12   31  2002  ...          RM    F            15.0    14.0
35547      35548     12   31  2002  ...          DO    M            36.0    51.0
35548      35549     12   31  2002  ...         NaN  NaN             NaN     NaN

[3839 rows x 9 columns]</code></pre>
</div>
<p>The combined dataframe includes all rows from both dataframes.</p>
<p>In some cases, the exact columns may change from year to year even within the same project. For example, researchers may decide to add an additional column to track a new piece of data or to provide a quality check. If a column is present in only one dataset, you can still concatenate the datasets. Any column that does not appear in one of the datasets will be set to NaN for those rows in the combined dataframe.</p>
<p>To illustrate this, we’ll add a validated column to the 2002 survey, then re-run <code>pd.concat()</code>:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>surveys_2002[<span class="st">"validated"</span>] <span class="op">=</span> <span class="va">True</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>surveys_2001_2002 <span class="op">=</span> pd.concat([surveys_2001, surveys_2002])</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>surveys_2001_2002</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id  month  day  year  ...  sex hindfoot_length weight  validated
31710      31711      1   21  2001  ...    F            26.0   25.0        NaN
31711      31712      1   21  2001  ...    M            37.0   43.0        NaN
31712      31713      1   21  2001  ...    M            29.0   44.0        NaN
31713      31714      1   21  2001  ...    M            34.0   53.0        NaN
31714      31715      1   21  2001  ...    M            20.0   27.0        NaN
...          ...    ...  ...   ...  ...  ...             ...    ...        ...
35544      35545     12   31  2002  ...  NaN             NaN    NaN       True
35545      35546     12   31  2002  ...  NaN             NaN    NaN       True
35546      35547     12   31  2002  ...    F            15.0   14.0       True
35547      35548     12   31  2002  ...    M            36.0   51.0       True
35548      35549     12   31  2002  ...  NaN             NaN    NaN       True

[3839 rows x 10 columns]</code></pre>
</div>
<p>As expected, validated has a value of NaN for the 2001 data in the combined dataframe.</p>
<!-- 
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use. 
 -->
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
				<p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
				<p><a href="https://github.com/adamancer/python-ecology-lesson-alt/edit/main/README.md" class="external-link">Edit on Github</a> | <a href="https://github.com/adamancer/python-ecology-lesson-alt/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a> | <a href="https://github.com/adamancer/python-ecology-lesson-alt/" class="external-link">Source</a></p>
				<p><a href="https://github.com/adamancer/python-ecology-lesson-alt/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:mansura@si.edu">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">
        
        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>
        
        <p><a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">Template licensed under CC-BY 4.0</a> by <a href="https://carpentries.org" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.5.1" class="external-link">sandpaper (0.5.1)</a>,
        <a href="https://github.com/carpentries/pegboard" class="external-link">pegboard (0.2.5)</a>,
      and <a href="https://github.com/carpentries/varnish/tree/0.1.11" class="external-link">varnish (0.1.11)</a>.</p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
			<i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back to top"></i><br><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://adamancer.github.io/python-ecology-lesson-alt/aio.html",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/0.9-DRAFT-2020_12_08",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "python, pandas, software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://adamancer.github.io/python-ecology-lesson-alt/aio.html",
  "identifier": "https://adamancer.github.io/python-ecology-lesson-alt/aio.html",
  "dateCreated": "2022-05-10",
  "dateModified": "2022-05-10",
  "datePublished": "2022-05-10"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(['trackPageView']);
          _paq.push(['enableLinkTracking']);
          (function() {
              var u="https://carpentries.matomo.cloud/";
              _paq.push(['setTrackerUrl', u+'matomo.php']);
              _paq.push(['setSiteId', '1']);
              var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
              g.async=true; g.src='https://cdn.matomo.cloud/carpentries.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

